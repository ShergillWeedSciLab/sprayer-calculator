<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>SWSL SprayCal Pro</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<style>
:root {
  --bg1: #f5f5f7;
  --bg2: #e3e3e5;
  --card: #ffffff;
  --text: #222222;
  --muted: #555555;
  --border: #d1d1d6;
  --accent1: #ff7f50;
  --accent2: #7fd1b9;
  --accent3: #f5c469;
  --button-bg: #4c4c4f;
  --button-hover: #636366;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, "Helvetica Neue", sans-serif;
  background: linear-gradient(135deg, var(--bg1), var(--bg2));
  color: var(--text);
  margin: 0;
  min-height: 100vh;
  display: flex;
  justify-content: center;
  align-items: flex-start;
  padding: 24px;
  box-sizing: border-box;
}

.container {
  background: var(--card);
  width: 100%;
  max-width: 650px;
  padding: 36px 32px;
  border-radius: 24px;
  box-shadow: 0 16px 32px rgba(0,0,0,0.08);
}

h1 {
  font-size: 2.4rem;
  font-weight: 700;
  text-align: center;
  margin: 0 0 24px;
  color: var(--text);
  letter-spacing: 1px;
}

.tabs {
  display: flex;
  gap: 10px;
  margin-bottom: 20px;
}

.tab {
  flex: 1;
  text-align: center;
  padding: 12px 0;
  border: none;
  background: var(--border);
  color: var(--text);
  border-radius: 12px 12px 0 0;
  font-weight: 600;
  cursor: pointer;
  transition: background 0.25s ease;
}
.tab:hover { background: #c7c7cc; }
.tab.active { background: var(--accent2); color: white; }

.tab-content { display: none; }
.tab-content.active { display: block; }

label {
  display: block;
  font-weight: 600;
  margin-top: 14px;
  color: var(--text);
}

input {
  width: 100%;
  padding: 12px;
  margin-top: 6px;
  border: 1px solid var(--border);
  border-radius: 12px;
  font-size: 16px;
  background: #f9f9f9;
  outline: none;
  transition: border 0.2s ease, background 0.2s ease;
  box-sizing: border-box;
}
input:focus {
  border-color: var(--accent2);
  background: #fff;
}

.description {
  font-size: 13px;
  color: var(--muted);
  margin-top: 4px;
  line-height: 1.35;
}

.calc-btn {
  width: 100%;
  padding: 14px;
  margin-top: 22px;
  background: var(--button-bg);
  color: white;
  font-size: 16px;
  font-weight: 700;
  border: none;
  border-radius: 12px;
  cursor: pointer;
  transition: background 0.25s ease;
}
.calc-btn:hover { background: var(--button-hover); }

.gpa-buttons {
  display: flex;
  gap: 6px;
  margin-top: 6px;
}
.gpa-button {
  flex: 1;
  padding: 8px 0;
  background: var(--accent3);
  border: none;
  border-radius: 10px;
  cursor: pointer;
  font-weight: 600;
  transition: background 0.2s ease;
}
.gpa-button:hover { background: #e0b258; }

.results {
  display: flex;
  flex-direction: column;
  gap: 12px;
  margin-top: 22px;
}

.result-card {
  padding: 16px 20px;
  border-radius: 16px;
  background: #ffffff;
  box-shadow: 0 6px 12px rgba(0,0,0,0.08);
  border-left: 6px solid var(--accent1);
}
.result-card h2 {
  margin: 0 0 8px;
  font-size: 1.25rem;
  color: var(--accent2);
}
.result-card p {
  margin: 4px 0;
  font-size: 15px;
}

.footer {
  text-align: center;
  font-size: 13px;
  color: var(--muted);
  margin-top: 24px;
}
.footer + .footer { margin-top: 8px; }
</style>
</head>
<body>
<div class="container">
<h1>SWSL SprayCal Pro</h1>

<div class="tabs">
  <button class="tab active" onclick="switchTab('current')">Current GPA</button>
  <button class="tab" onclick="switchTab('target')">Target GPA</button>
</div>

<!-- CURRENT GPA CALCULATOR -->
<div id="current" class="tab-content active">
  <label>Number of nozzles</label>
  <input type="number" id="n_nozzles" value="4" min="1" />
  <div class="description">Count all nozzles installed on the boom. GPA itself is independent of nozzle count.</div>

  <label>Nozzle spacing (inches)</label>
  <input type="number" id="spacing_in" value="20" min="1" step="0.5" />
  <div class="description">Center-to-center distance between adjacent nozzles in inches.</div>

  <label>Calibration distance (feet)</label>
  <input type="number" id="calib_distance_ft" value="100" min="1" step="1" />
  <div class="description">Measured course length that you travel at application speed. Use a measuring tape & flags.</div>

  <label>Calibration time for that distance (seconds)</label>
  <input type="number" id="calib_time_sec" value="15" min="1" step="0.1" />
  <div class="description">Time required to travel the calibration distance at application speed. Use a stopwatch. This defines ground speed for the calculations.</div>

  <label>Per nozzle catch in 15 seconds (mL)</label>
  <input type="number" id="catch_15s_ml" value="150" min="0" step="0.1" />
  <div class="description">Collect output from one nozzle for exactly 15 seconds at operating pressure. <strong>Pro-Tip:</strong> use an average from at least 3 nozzles.</div>

  <button class="calc-btn" onclick="calculateCurrent()">Calculate Current GPA</button>

  <div class="results" id="results-current" style="display:none;">
    <div class="result-card"><h2>Ground speed</h2><p><span id="speed_current"></span> mph</p></div>
    <div class="result-card"><h2>Nozzle flow rate</h2><p><span id="gpm_current"></span> GPM per nozzle</p></div>
    <div class="result-card"><h2>Per nozzle in 15 s</h2><p><span id="pernoz15_fl"></span> fl oz (<span id="pernoz15_ml"></span> mL)</p></div>
    <div class="result-card"><h2>Total boom in 15 s</h2><p><span id="boom15_fl"></span> fl oz (<span id="boom15_ml"></span> mL)</p></div>
    <div class="result-card"><h2>Gallons per acre (GPA)</h2><p><span id="gpa_current"></span></p></div>
  </div>
</div>

<!-- TARGET GPA CALCULATOR -->
<div id="target" class="tab-content">
  <label>Desired application rate (GPA)</label>
  <div class="gpa-buttons">
    <button class="gpa-button" onclick="setTargetGPA(10)">10</button>
    <button class="gpa-button" onclick="setTargetGPA(15)">15</button>
    <button class="gpa-button" onclick="setTargetGPA(20)">20</button>
    <button class="gpa-button" onclick="setCustomGPA()">Custom</button>
  </div>
  <input type="number" id="target_gpa" value="15" min="0" step="0.1" />
  <div class="description">Select a standard GPA or enter a custom desired application rate for your field.</div>

  <label>Nozzle spacing (inches)</label>
  <input type="number" id="spacing_in_target" value="20" min="1" step="0.5" />
  <div class="description">Center-to-center distance between adjacent nozzles in inches.</div>

  <label>Calibration distance (feet)</label>
  <input type="number" id="calib_distance_ft_target" value="100" min="1" step="1" />
  <div class="description">Measured course length that you travel at application speed.</div>

  <label>Calibration time for that distance (seconds)</label>
  <input type="number" id="calib_time_sec_target" value="15" min="1" step="0.1" />
  <div class="description">Time required to travel the calibration distance at application speed.</div>

  <button class="calc-btn" onclick="calculateTarget()">Calculate Required Volume per Nozzle</button>

  <div class="results" id="results-target" style="display:none;">
    <div class="result-card"><h2>Ground speed</h2><p><span id="speed_target"></span> mph</p></div>
    <div class="result-card"><h2>Required nozzle flow</h2><p><span id="gpm_target"></span> GPM per nozzle</p></div>
    <div class="result-card"><h2>Required per nozzle in 15 s</h2><p><span id="req15_fl"></span> fl oz (<span id="req15_ml"></span> mL)</p></div>
  </div>
</div>

<div class="footer">All calculations run locally in your browser. No data is stored.</div>
<div class="footer">Created by: Dr. Lovreet S. Shergill</div>

<script>
const FT_PER_MILE=5280,SEC_PER_HOUR=3600,ML_PER_GALLON=3785.41,ML_TO_GALLON=0.000264172,SPRAYER_CONST=5940;
const FL_OZ_PER_GAL=128;

function switchTab(id){
  document.querySelectorAll(".tab").forEach(btn=>btn.classList.remove("active"));
  document.querySelectorAll(".tab-content").forEach(el=>el.classList.remove("active"));
  if(id==="current"){document.querySelectorAll(".tab")[0].classList.add("active");document.getElementById("current").classList.add("active");}
  else{document.querySelectorAll(".tab")[1].classList.add("active");document.getElementById("target").classList.add("active");}
}

function calculateCurrent(){
  const nNoz=parseFloat(document.getElementById("n_nozzles").value),
  spacingIn=parseFloat(document.getElementById("spacing_in").value),
  distFt=parseFloat(document.getElementById("calib_distance_ft").value),
  timeSec=parseFloat(document.getElementById("calib_time_sec").value),
  catch15mL=parseFloat(document.getElementById("catch_15s_ml").value);
  if(!isFinite(nNoz)||!isFinite(spacingIn)||!isFinite(distFt)||!isFinite(timeSec)||!isFinite(catch15mL)||nNoz<=0||spacingIn<=0||distFt<=0||timeSec<=0||catch15mL<0){alert("Please provide valid positive inputs for all fields.");return;}
  const mph=(distFt/timeSec)*(SEC_PER_HOUR/FT_PER_MILE),
  catch15_gal=catch15mL*ML_TO_GALLON,
  gpm_per_nozzle=catch15_gal/0.25,
  gpa=(gpm_per_nozzle*SPRAYER_CONST)/(mph*spacingIn),
  boom_15_gal=catch15_gal*nNoz,
  boom_15_ml=catch15mL*nNoz,
  per15_fl=catch15_gal*FL_OZ_PER_GAL,
  boom15_fl=boom_15_gal*FL_OZ_PER_GAL;
  document.getElementById("results-current").style.display="block";
  document.getElementById("speed_current").innerText=mph.toFixed(2);
  document.getElementById("gpm_current").innerText=gpm_per_nozzle.toFixed(3);
  document.getElementById("pernoz15_fl").innerText=per15_fl.toFixed(2);
  document.getElementById("pernoz15_ml").innerText=catch15mL.toFixed(1);
  document.getElementById("boom15_fl").innerText=boom15_fl.toFixed(2);
  document.getElementById("boom15_ml").innerText=boom_15_ml.toFixed(1);
  document.getElementById("gpa_current").innerText=gpa.toFixed(2);
}

function calculateTarget(){
  const targetGPA=parseFloat(document.getElementById("target_gpa").value),
  spacingIn=parseFloat(document.getElementById("spacing_in_target").value),
  distFt=parseFloat(document.getElementById("calib_distance_ft_target").value),
  timeSec=parseFloat(document.getElementById("calib_time_sec_target").value);
  if(!isFinite(targetGPA)||!isFinite(spacingIn)||!isFinite(distFt)||!isFinite(timeSec)||targetGPA<0||spacingIn<=0||distFt<=0||timeSec<=0){alert("Please provide valid positive inputs for all fields.");return;}
  const mph=(distFt/timeSec)*(SEC_PER_HOUR/FT_PER_MILE),
  gpm_needed=(targetGPA*mph*spacingIn)/SPRAYER_CONST,
  req15_gal=gpm_needed*0.25,
  req15_ml=req15_gal*ML_PER_GALLON,
  req15_fl=req15_gal*FL_OZ_PER_GAL;
  document.getElementById("results-target").style.display="block";
  document.getElementById("speed_target").innerText=mph.toFixed(2);
  document.getElementById("gpm_target").innerText=gpm_needed.toFixed(3);
  document.getElementById("req15_fl").innerText=req15_fl.toFixed(2);
  document.getElementById("req15_ml").innerText=req15_ml.toFixed(1);
}

function setTargetGPA(val){document.getElementById("target_gpa").value=val;}
function setCustomGPA(){document.getElementById("target_gpa").focus();}
</script>
</body>
</html>
