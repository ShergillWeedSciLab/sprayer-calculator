<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>SWSL SprayCal Pro</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<style>
/* 
================================================
COLOR THEME - Change these to customize colors
================================================
*/
:root {
  /* Page colors */
  --bg-gradient: linear-gradient(135deg, #f9f9f9, #eaeaea);
  --card-bg: #ffffff;
  --text-primary: #1c1c1e;
  --text-secondary: #555;
  --accent-orange: #D9782D;
  --accent-green: #1E4D2B;
  --input-border: #e0e0e0;
  
  /* Button colors */
  --button-dark: #333;
  --button-dark-hover: #555;
  --button-light: #f0f0f0;
  --button-light-hover: #e0e0e0;
  --gpa-button: #f0f0f0;
  --gpa-button-active: #d0d0d0;
  --gpa-button-hover: #e0e0e0;
}

/* 
================================================
MAIN PAGE LAYOUT
================================================
*/
body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
  background: var(--bg-gradient);
  margin: 0;
  min-height: 100vh;
  display: flex;
  justify-content: center;
  align-items: flex-start;
  padding: 24px;
  box-sizing: border-box;
}

.container {
  background: var(--card-bg);
  width: 100%;
  max-width: 750px;
  padding: 32px 28px;
  border-radius: 20px;
  box-shadow: 0 12px 28px rgba(0,0,0,0.08);
}

/* 
================================================
HEADER SECTION
================================================
*/
.header {
  text-align: center;
  margin-bottom: 25px;
  padding-bottom: 15px;
  border-bottom: 2px solid rgba(217, 120, 45, 0.2);
}

.title {
  font-size: 2.4rem;
  font-weight: 800;
  margin: 0 0 8px;
  letter-spacing: -0.5px;
  text-shadow: 0 3px 3px rgba(0, 0, 0, 0.2);
}

.subtitle {
  font-size: 1rem;
  color: var(--text-secondary);
  font-weight: 500;
  margin: 0;
}

/* 
================================================
TAB NAVIGATION
================================================
*/
.tabs { 
  display: flex; 
  gap: 8px; 
  margin-bottom: 18px; 
}

.tab { 
  flex: 1; 
  text-align: center; 
  padding: 10px 12px; 
  border: none; 
  border-radius: 10px 10px 0 0;
  font-weight: 600; 
  cursor: pointer; 
  transition: all 0.25s ease; 
  background: #f5f5f5; 
  color: var(--text-primary);
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
  transform: translateY(0);
}

.tab:hover {
  background: #eee;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.tab.active {
  background: var(--accent-orange); 
  color: white;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(217, 120, 45, 0.3);
}

.tab-content { 
  display: none; 
}

.tab-content.active { 
  display: block;
  animation: tabOpen 0.4s ease-out;
}

@keyframes tabOpen {
  0% { opacity: 0; transform: translateY(10px); }
  100% { opacity: 1; transform: translateY(0); }
}

/* 
================================================
FORM INPUTS
================================================
*/
label { 
  display: block; 
  font-weight: 600; 
  margin-top: 14px; 
  color: var(--text-primary);
}

input { 
  width: 100%; 
  padding: 12px; 
  margin-top: 6px; 
  border: 1px solid var(--input-border); 
  border-radius: 10px;
  font-size: 16px; 
  background: #fafafa; 
  outline: none; 
  box-sizing: border-box; 
}

input:focus { 
  border-color: var(--accent-orange); 
  background: #fff; 
  box-shadow: 0 0 0 3px rgba(217, 120, 45, 0.1);
}

.description { 
  font-size: 13px; 
  color: var(--text-secondary); 
  margin-top: 4px; 
  line-height: 1.35; 
}

/* 
================================================
BUTTONS
================================================
*/
/* Main calculation buttons */
.calc-btn { 
  width: 100%; 
  padding: 14px; 
  margin: 22px 0 12px 0;
  background: var(--button-dark); 
  color: white; 
  font-size: 16px; 
  font-weight: 700;
  border: none; 
  border-radius: 12px; 
  cursor: pointer; 
  transition: all 0.25s ease; 
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.calc-btn:hover {
  background: var(--button-dark-hover);
  transform: translateY(-3px);
  box-shadow: 0 8px 20px rgba(0,0,0,0.25);
}

/* GPA selection buttons */
.gpa-buttons { 
  display: flex; 
  gap: 6px; 
  margin-top: 6px; 
  flex-wrap: wrap; 
}

.gpa-btn { 
  flex: 1; 
  padding: 8px 10px; 
  font-size: 13px; 
  font-weight: 600; 
  border-radius: 10px; 
  border: 1px solid var(--input-border);
  background: var(--gpa-button); 
  color: var(--text-primary); 
  cursor: pointer; 
  transition: all 0.2s ease; 
  text-align: center;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
}

.gpa-btn:hover {
  background: var(--gpa-button-hover);
}

.gpa-btn.active {
  background: var(--gpa-button-active); 
  border-color: #b0b0b0;
}

/* Action buttons (Reset and Print) */
.actions {
  display: flex;
  gap: 12px;
  margin-top: 20px;
}

.action-btn {
  padding: 12px 20px;
  border: none;
  border-radius: 10px;
  cursor: pointer;
  font-weight: 700;
  transition: all 0.2s ease;
  flex: 1;
  font-size: 16px;
  box-shadow: 0 3px 8px rgba(0, 0, 0, 0.12);
}

.action-btn:hover {
  transform: translateY(-3px);
  box-shadow: 0 6px 15px rgba(0, 0, 0, 0.18);
}

.reset-btn {
  background: var(--button-light);
  color: var(--text-primary);
}

.reset-btn:hover {
  background: var(--button-light-hover);
}

.print-btn {
  background: var(--accent-green);
  color: white;
}

.print-btn:hover {
  background: #163a21;
}

/* 
================================================
RESULTS DISPLAY
================================================
*/
.results-heading {
  font-size: 1.3rem;
  font-weight: 700;
  margin: 25px 0 15px;
  color: var(--accent-green);
}

.results-grid { 
  display: grid; 
  grid-template-columns: repeat(auto-fit, minmax(160px, 1fr)); 
  gap: 12px; 
  margin-top: 4px; 
}

.result-card { 
  background: #fff; 
  border-radius: 14px; 
  padding: 12px 14px; 
  box-shadow: 0 4px 12px rgba(0,0,0,0.12);
  display: flex; 
  flex-direction: column; 
  align-items: center;
  text-align: center;
  transition: all 0.25s ease;
}

.result-card:hover {
  transform: translateY(-3px);
  box-shadow: 0 8px 20px rgba(0,0,0,0.18);
}

.result-card h3 {
  margin: 0 0 4px; 
  font-size: 13px; 
  font-weight: 600; 
  color: #333;
}

.result-card p {
  margin: 0; 
  font-size: 13px; 
  color: #555;
  font-weight: 500;
}

.highlight-orange {
  color: var(--accent-orange);
  font-weight: 700;
}

/* 
================================================
SLEEK FOOTER
================================================
*/
.footer { 
  margin-top: 6px;
  padding: 20px;
  background: rgba(248, 248, 248, 0.6);
  border-radius: 12px;
  border-top: 1px solid rgba(0, 0, 0, 0.06);
}

.footer-content {
  display: flex;
  flex-direction: column;
  align-items: center;
  text-align: center;
  gap: 12px;
}

.footer-info {
  color: #777;
  font-size: 12px;
  font-weight: 500;
  margin: 0;
}

.footer-developer {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 4px;
}

.developer-name {
  font-size: 12px;
  font-weight: 600;
  color: var(--text-secondary);
  margin: 0;
}

.developer-affiliation {
  font-size: 12px;
  color: #888;
  font-weight: 500;
  margin: 0;
  line-height: 1.3;
}

.footer-meta {
  display: flex;
  align-items: center;
  gap: 16px;
  font-size: 11px;
  color: #999;
  font-weight: 500;
}

.version-badge {
  background: linear-gradient(135deg, var(--accent-green), var(--accent-orange));
  color: white;
  padding: 3px 8px;
  border-radius: 10px;
  font-weight: 500;
  font-size: 11px;
  letter-spacing: 0.3px;
}

.ai-acknowledgment {
  font-size: 11px;
  color: #aaa;
  font-style: italic;
}

.print-footer {
  display: none;
}

/* 
================================================
MOBILE RESPONSIVENESS
================================================
*/
@media (max-width: 600px) {
  .container {
    padding: 20px;
  }
  
  .title {
    font-size: 2rem;
  }
  
  .tabs {
    flex-direction: column;
  }
  
  .tab {
    border-radius: 10px;
    margin-bottom: 5px;
    font-size: 16px;
    padding: 12px 16px;
  }
  
  .results-grid {
    grid-template-columns: 1fr;
  }
  
  .actions {
    flex-direction: column;
  }

  .footer {
    padding: 16px;
    margin-top: 20px;
  }

  .footer-meta {
    flex-direction: column;
    gap: 6px;
  }
}

/* Additional styling for tablets and larger mobile devices */
@media (max-width: 1024px) and (min-width: 601px) {
  .tab {
    font-size: 15px;
    padding: 12px 14px;
  }
}

/* 
================================================
PRINT STYLES
================================================
*/
@media print {
  body {
    background: white;
    padding: 0;
    font-size: 12pt;
  }
  
  .container {
    box-shadow: none;
    padding: 15px;
    max-width: 100%;
  }
  
  .tabs, .calc-btn, .gpa-buttons, .actions {
    display: none;
  }
  
  .tab-content {
    display: none !important;
  }
  
  .tab-content.active {
    display: block !important;
  }
  
  .results {
    display: block !important;
  }

  .footer {
    display: none;
  }
  
  .print-footer {
    display: block !important;
    text-align: center;
    font-size: 10pt;
    margin-top: 25px;
    padding-top: 10px;
    border-top: 1px solid #ddd;
    color: #666;
  }
  
  .result-card {
    box-shadow: none;
    border: 1px solid #ddd !important;
    page-break-inside: avoid;
  }
}
</style>
</head>
<body>
<!-- 
================================================
MAIN APPLICATION CONTAINER
================================================
-->
<div class="container">
  
  <!-- HEADER: Application title and description -->
  <div class="header">
    <h1 class="title">
      <span style="color: #1E4D2B;">SWSL</span> 
      <span style="color: #D9782D;">SprayCal Pro</span>
    </h1>
    <p class="subtitle">Advanced Research Sprayer Calibration Tool</p>
  </div>

  <!-- TAB NAVIGATION: Switch between two calculation modes -->
  <div class="tabs">
    <button class="tab active" onclick="switchTab('current')">Current GPA</button>
    <button class="tab" onclick="switchTab('target')">Target GPA</button>
  </div>

  <!-- 
  ================================================
  CURRENT GPA TAB - Analyze existing setup
  ================================================
  -->
  <div id="current" class="tab-content active">
    
    <label>Nozzle spacing (inches)</label>
    <input type="number" id="spacing_in" value="20" min="1" step="0.5" />
    <div class="description">Center-to-center distance between adjacent nozzles in inches. Enter spray width for single nozzle</div>

    <label>Calibration distance (feet)</label>
    <input type="number" id="calib_distance_ft" value="100" min="1" step="1" />
    <div class="description">Measured course length that you travel at application speed. Use tape & flags.</div>

    <label>Calibration time for that distance (seconds)</label>
    <input type="number" id="calib_time_sec" value="10" min="1" step="0.1" />
    <div class="description">Time required to travel calibration distance at application speed. Use stopwatch. Defines ground speed.</div>

    <label>Nozzle flow measurement (mL/15s)</label>
    <input type="number" id="catch_15s_ml" value="150" min="0" step="0.1" />
    <div class="description">Volume of liquid collected from an individual nozzle over a 15-second interval. <br><strong>Pro-Tip:</strong> For accurate calibration, average results from multiple nozzles (at least 3).</div>

    <button class="calc-btn" onclick="calculateCurrent()">Analyze Current Setup</button>

    <!-- RESULTS SECTION -->
    <div class="results" id="results-current" style="display:none;">
      <h2 class="results-heading">Results</h2>
      <div class="results-grid">
        <div class="result-card">
          <h3>Ground speed</h3>
          <p><span id="speed_current"></span> mph</p>
        </div>
        <div class="result-card">
          <h3>Nozzle flow rate</h3>
          <p><span id="gpm_current"></span> GPM</p>
        </div>
        <div class="result-card">
          <h3>Gallons per acre (GPA)</h3>
          <p><span class="highlight-orange" id="gpa_current"></span></p>
        </div>
        <div class="result-card">
          <h3>Tanks per acre<br>(1 tank = 50 gal)</h3>
          <p><span id="tanks_per_acre_current"></span></p>
        </div>
      </div>
      
      <div class="actions">
        <button class="action-btn reset-btn" onclick="resetForm('current')">Reset Form</button>
        <button class="action-btn print-btn" onclick="printActiveTab()">PRINT</button>
      </div>
    </div>
  </div>

  <!-- 
  ================================================
  TARGET GPA TAB - Calculate requirements for desired GPA
  ================================================
  -->
  <div id="target" class="tab-content">
    
    <label>Desired application rate (GPA)</label>
    <div class="gpa-buttons">
      <button class="gpa-btn" onclick="setGPA(10,this)">10 GPA</button>
      <button class="gpa-btn" onclick="setGPA(15,this)">15 GPA</button>
      <button class="gpa-btn" onclick="setGPA(20,this)">20 GPA</button>
      <button class="gpa-btn active" onclick="setGPA(null,this)">Custom</button>
    </div>
    <input type="number" id="target_gpa" value="15" min="0" step="1" />
    <div class="description">Click a button to select standard GPA or enter a custom value above.</div>

    <label>Nozzle spacing (inches)</label>
    <input type="number" id="spacing_in_target" value="20" min="1" step="0.5" />
    <div class="description">Center-to-center distance between adjacent nozzles in inches. Enter spray width for single nozzle</div>

    <label>Calibration distance (feet)</label>
    <input type="number" id="calib_distance_ft_target" value="100" min="1" step="1" />
    <div class="description">Measured course length at application speed. Use tape & flags.</div>

    <label>Calibration time for that distance (seconds)</label>
    <input type="number" id="calib_time_sec_target" value="10" min="1" step="0.1" />
    <div class="description">Time required to travel calibration distance. Defines ground speed.</div>

    <button class="calc-btn" onclick="calculateTarget()">Calculate Target Requirements</button>

    <!-- RESULTS SECTION -->
    <div class="results" id="results-target" style="display:none;">
      <h2 class="results-heading">Results</h2>
      <div class="results-grid">
        <div class="result-card">
          <h3>Ground speed</h3>
          <p><span id="speed_target"></span> mph</p>
        </div>
        <div class="result-card">
          <h3>Required flow per nozzle</h3>
          <p><span class="highlight-orange"><span id="req15_ml"></span> mL in 15s</span><br>(<span id="ml_min_target"></span> mL/min)</p>
        </div>
        <div class="result-card">
          <h3>Tanks per acre<br>(1 tank = 50 gal)</h3>
          <p><span id="tanks_per_acre_target"></span></p>
        </div>
      </div>
      
      <div class="actions">
        <button class="action-btn reset-btn" onclick="resetForm('target')">Reset Form</button>
        <button class="action-btn print-btn" onclick="printActiveTab()">PRINT</button>
      </div>
    </div>
  </div>

  <!-- SLEEK FOOTER: Minimal and professional design -->
  <div class="footer">
    <div class="footer-content">
      <p class="footer-info">All calculations run locally in your browser. No data is stored or transmitted.</p>
      
      <div class="footer-developer">
        <p class="developer-name">Developed by <strong>Dr. Lovreet S. Shergill</strong></p>
        <p class="developer-affiliation"><strong>Agricultural Biology | Colorado State University</strong></p>
      </div>
      
      <div class="footer-meta">
        <span class="version-badge">v1.18</span>
        <span>August 2025 | Built with AI assistance</span>
      </div>
    </div>
  </div>
  
  <!-- PRINT-ONLY FOOTER -->
  <div class="print-footer">
    Developed by Dr. Lovreet S. Shergill | Department of Agricultural Biology, Colorado State University | v1.0
  </div>
</div>

<script>
/* 
================================================
CALCULATION CONSTANTS
================================================
These numbers are used in sprayer calibration formulas
*/
const FT_PER_MILE = 5280;        // Feet in one mile
const SEC_PER_HOUR = 3600;       // Seconds in one hour  
const ML_PER_GALLON = 3785.41;   // Milliliters in one gallon
const SPRAYER_CONST = 5940;      // Standard sprayer calculation constant
const TANK_SIZE = 50;            // Tank size for calculations (gallons)

/* 
================================================
TAB SWITCHING
================================================
Controls which tab is visible (Current GPA or Target GPA)
*/
function switchTab(id){
  // Hide all tabs and content
  document.querySelectorAll('.tab').forEach(btn => btn.classList.remove('active'));
  document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
  
  // Show selected tab
  if(id === 'current'){
    document.querySelectorAll('.tab')[0].classList.add('active');
    document.getElementById('current').classList.add('active');
  } else {
    document.querySelectorAll('.tab')[1].classList.add('active');
    document.getElementById('target').classList.add('active');
  }
}

/* 
================================================
UTILITY FUNCTIONS
================================================
*/
function printActiveTab() {
  window.print();
}

function resetForm(tab) {
  if (tab === 'current') {
    document.getElementById('spacing_in').value = '20';
    document.getElementById('calib_distance_ft').value = '100';
    document.getElementById('calib_time_sec').value = '10';
    document.getElementById('catch_15s_ml').value = '150';
    document.getElementById('results-current').style.display = 'none';
  } else {
    document.getElementById('target_gpa').value = '15';
    document.getElementById('spacing_in_target').value = '20';
    document.getElementById('calib_distance_ft_target').value = '100';
    document.getElementById('calib_time_sec_target').value = '10';
    document.getElementById('results-target').style.display = 'none';
    
    document.querySelectorAll('.gpa-btn').forEach(btn => btn.classList.remove('active'));
    document.querySelectorAll('.gpa-btn')[3].classList.add('active');
  }
}

function setGPA(value, button){
  const input = document.getElementById('target_gpa');
  if(value !== null){ 
    input.value = value;
  } else {
    input.focus();
    input.select();
  }
  document.querySelectorAll('.gpa-btn').forEach(btn => btn.classList.remove('active'));
  button.classList.add('active');
}

/* 
================================================
CALCULATION FUNCTIONS
================================================
*/

/* CURRENT GPA CALCULATION - Analyzes existing sprayer setup */
function calculateCurrent(){
  // Get input values
  const spacingIn = parseFloat(document.getElementById('spacing_in').value),
        distFt = parseFloat(document.getElementById('calib_distance_ft').value),
        timeSec = parseFloat(document.getElementById('calib_time_sec').value),
        catch15mL = parseFloat(document.getElementById('catch_15s_ml').value);
  
  // Validate inputs
  if([spacingIn, distFt, timeSec, catch15mL].some(v => !isFinite(v) || v <= 0)){
    alert('Please provide valid positive inputs for all fields');
    return;
  }

  // Calculate results
  const mph = (distFt / timeSec) * (SEC_PER_HOUR / FT_PER_MILE);
  const catch15_gal = catch15mL / ML_PER_GALLON;
  const gpm_per_nozzle = catch15_gal / 0.25;
  const gpa = (gpm_per_nozzle * SPRAYER_CONST) / (mph * spacingIn);
  const tanksPerAcre = gpa > 0 ? (TANK_SIZE / gpa).toFixed(2) : 0;

  // Display results
  document.getElementById('results-current').style.display = 'block';
  document.getElementById('speed_current').innerText = mph.toFixed(2);
  document.getElementById('gpm_current').innerText = gpm_per_nozzle.toFixed(3);
  document.getElementById('gpa_current').innerText = gpa.toFixed(2);
  document.getElementById('tanks_per_acre_current').innerText = tanksPerAcre;
}

/* TARGET GPA CALCULATION - Calculates requirements for desired GPA */
function calculateTarget(){
  // Get input values
  const targetGPA = parseFloat(document.getElementById('target_gpa').value),
        spacingIn = parseFloat(document.getElementById('spacing_in_target').value),
        distFt = parseFloat(document.getElementById('calib_distance_ft_target').value),
        timeSec = parseFloat(document.getElementById('calib_time_sec_target').value);

  // Validate inputs
  if([targetGPA, spacingIn, distFt, timeSec].some(v => !isFinite(v) || v <= 0)){
    alert('Please provide valid positive inputs for all fields');
    return;
  }

  // Calculate results
  const mph = (distFt / timeSec) * (SEC_PER_HOUR / FT_PER_MILE);
  const gpm_needed = (targetGPA * mph * spacingIn) / SPRAYER_CONST;
  const ml_per_min = gpm_needed * ML_PER_GALLON;
  const req15_ml = ml_per_min * 0.25;
  const tanksPerAcre = targetGPA > 0 ? (TANK_SIZE / targetGPA).toFixed(2) : 0;

  // Display results
  document.getElementById('results-target').style.display = 'block';
  document.getElementById('speed_target').innerText = mph.toFixed(2);
  document.getElementById('ml_min_target').innerText = ml_per_min.toFixed(1);
  document.getElementById('req15_ml').innerText = req15_ml.toFixed(1);
  document.getElementById('tanks_per_acre_target').innerText = tanksPerAcre;
}
</script>
</body>
</html>
